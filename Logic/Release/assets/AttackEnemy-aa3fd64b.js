import{g as a,a as s}from"./getElementByXpath-3b38d01d.js";import{c as w}from"./Click-59d5e1cf.js";function c(r,m){return document.evaluate(r,m??document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}const M=c("//input[contains(@value, 'Continue')]"),y=document.URL.match(/id=([0-9]+)/),B=async(r,m,l)=>{const e=new FormData;l&&e.append("count",l),e.append("submit","Confirm+%C2%BB");let t=await fetch("https://blackdragon.mobi/items/index/",{cache:"no-cache"});t=await t.text(),t=new DOMParser().parseFromString(t,"text/html");const h=c(`//a[contains(@href, 'set=${m}')]`,t);h&&await fetch(h.href,{cache:"no-cache"});let n=await fetch("https://blackdragon.mobi/credits/index/",{cache:"no-cache"});n=await n.text(),n=new DOMParser().parseFromString(n,"text/html");const d=c("//a[contains(text(), 'Increase Health & Mana')]",n);let o=await fetch(d.href,{cache:"no-cache"});o=await o.text(),o=new DOMParser().parseFromString(o,"text/html"),l===-1&&e.append("count",c("//input[@name='count' and @type='hidden']",o).value);let u=c("//form",o).action,i=await fetch(u,{method:"POST",cache:"no-cache",body:e});i=await i.text(),i=new DOMParser().parseFromString(i,"text/html"),u=c("//form",i).action,fetch(u,{method:"POST",cache:"no-cache",body:e}),t=await fetch("https://blackdragon.mobi/items/index/",{cache:"no-cache"}),t=await t.text(),t=new DOMParser().parseFromString(t,"text/html");const f=c(`//a[contains(@href, 'set=${r}')]`,t);f&&await fetch(f.href,{cache:"no-cache"}),w(M)||(window.location.href=`https://blackdragon.mobi/units/view/id=${y[1]}/`)},v=async()=>{const r=await a("masterkey"),m=await a("enemies.status"),l=await a("autoboost.status");if(!r||!m)return null;const e=s("//input[contains(@value, 'ATTACK')]"),t=s("//input[contains(@value, 'Continue')]"),h=parseInt(s("//div[@class = 'small']/text()[2]").textContent.replace(/[^0-9]/g,"")),n=parseInt(s("//div[@class = 'small']/text()[4]").textContent.replace(/[^0-9]/g,"")),d=parseInt(s("//div[@class = 'small']/text()[6]").textContent.replace(/[^0-9]/g,"")),o=parseInt(await a("enemies.health")),u=parseInt(await a("enemies.mana")),i=parseInt(await a("enemies.stamina")),f=parseInt(await a("autoboost.health")),I=parseInt(await a("autoboost.mana")),b=parseInt(await a("autoboost.credits")),x=parseInt(await a("autoboost.baseSet")),g=parseInt(await a("autoboost.boostSet")),_=await a("enemies.health_potion"),P=await a("enemies.mana_potion"),k=s("//a[contains(text(),'Stamina potion') and contains(text(), '»')]"),S=await get_data_async("bosses.status");if(l&&(h<=f||n<=I)&&x&&g&&b)return B(x,g,b);if(d<=i&&k)return k.click();if(h<=o&&_){const p=s(`//a[contains(text(),'${_}') and contains(text(), '»')]`);if(p)return p.click()}if(n<=u&&P){const p=s(`//a[contains(text(),'${P}') and contains(text(), '»')]`);if(p)return p.click()}if(e)return w(e);if(t){if(S){location.href="https://blackdragon.mobi/quests/index/";return}return w(t)}};v();
